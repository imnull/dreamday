(()=>{"use strict";var e={913:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,o,r){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var d=this[a][0];null!=d&&(s[d]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);i&&s[u[0]]||(void 0!==r&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=r),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},264:e=>{e.exports=function(e){return e[1]}},967:function(e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useMovable=t.createMovable=void 0,t.createMovable=function(e){void 0===e&&(e={});var t=e.onStart,i=e.onMoving,o=e.onEnd,r=e.debug,s=void 0!==r&&r,a=e.grid,d=void 0===a?1:a,c=e.snap,u=void 0===c?null:c,l=Math.max(1,d>>0),f={element:null,status:0,start:{x:0,y:0},offset:{x:0,y:0},position:{x:0,y:0},snap:u},p=function(e){e.stopPropagation(),f.status=1,f.start={x:e.clientX,y:e.clientY},f.offset={x:0,y:0},"function"==typeof t&&t()},g=function(e){if(e.stopPropagation(),1===f.status){var t=e.clientX-f.start.x,n=e.clientY-f.start.y,o={x:t,y:n},r={x:f.position.x+t,y:f.position.y+n};f.offset=o,"function"==typeof i&&i({position:r,offset:o})}},h=function(e){if(e.stopPropagation(),1===f.status){f.status=0;var t=f.offset,n=t.x,i=t.y,r={x:f.position.x+n,y:f.position.y+i};r.x=Math.round(r.x/l)*l,r.y=Math.round(r.y/l)*l,"function"==typeof o&&o({position:r,offset:{x:n,y:i}})}};return{snap:function(e){f.snap=e},getSnap:function(){return f.snap},update:function(e){f.position=n({},e)},init:function(e){f.element=e,e.addEventListener("mousedown",p),document.addEventListener("mousemove",g),document.addEventListener("mouseup",h),s&&console.log("[movable] inited")},dispose:function(){f.element&&f.element.removeEventListener("mousedown",p),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",h),s&&console.log("[movable] displosed")}}},t.useMovable=function(e){var i=e.update,o=e.debug,r=void 0!==o&&o,s=e.onChange,a=function(e){var t=n({},e.position);"function"==typeof i&&i(t),"function"==typeof s&&s(e)},d=(0,t.createMovable)({debug:r,onMoving:function(e){a(e)},onEnd:function(e){d.update(e.position),a(e)}});return d}},472:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(264),o=n.n(i),r=n(913),s=n.n(r)()(o());s.push([e.id,'.marvin-widget{display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;position:relative;width:240px;height:240px;border:0px solid rgba(0,0,0,.1);background-color:rgba(230,230,230,.5);backdrop-filter:blur(4px);position:absolute;overflow:hidden;border-radius:0px;box-shadow:2px 3px 15px 0px rgba(0,0,0,.2);z-index:10;transition:box-shadow .2s}.marvin-widget.background{z-index:5;box-shadow:none}.marvin-widget.background .widget-head{color:#666}.marvin-widget.background .widget-head .tools .btn.minify,.marvin-widget.background .widget-head .tools .btn.maxium,.marvin-widget.background .widget-head .tools .btn.close{background-color:#d3d5d7}.marvin-widget .widget-head{transition:opacity .2s;padding:6px 12px 4px 12px;background-color:#fff;flex-shrink:0;flex-grow:0;color:#333;font-weight:bold;display:flex;flex-direction:row;align-items:center;justify-content:space-between;user-select:none;font-size:16px;position:relative;z-index:3;cursor:move}.marvin-widget .widget-head .title{flex-grow:1;flex-shrink:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.marvin-widget .widget-head .tools{display:flex;flex-direction:row;cursor:pointer}.marvin-widget .widget-head .tools .btn{width:12px;height:12px;background-color:#d3d5d7;border-radius:8px;margin-left:6px}.marvin-widget .widget-head .tools .btn.minify{background-color:#fdb43f}.marvin-widget .widget-head .tools .btn.maxium{background-color:#2cc046}.marvin-widget .widget-head .tools .btn.close{background-color:#fd5551}.marvin-widget .widget-body{background-color:rgba(0,0,0,0);flex:1;position:absolute;left:0;top:0;right:0;bottom:0}.marvin-widget .widget-status{height:12px;overflow:hidden;background-color:#fff;flex-grow:0;flex-shrink:0}.marvin-widget .widget-resize{position:absolute;z-index:5;background-color:rgba(0,0,0,0);left:0;top:0;right:0;bottom:0;pointer-events:none;user-select:none}.marvin-widget .widget-resize .bar{position:absolute;width:6px;height:6px;pointer-events:all;z-index:5;user-select:none}.marvin-widget .widget-resize .bar.debug{background-color:rgba(0,0,0,.2)}.marvin-widget .widget-resize .bar.left{left:0;top:0;height:100%;cursor:ew-resize}.marvin-widget .widget-resize .bar.right{right:0;top:0;height:100%;cursor:ew-resize}.marvin-widget .widget-resize .bar.bottom{bottom:0;left:0;width:100%;cursor:ns-resize}.marvin-widget .widget-resize .bar.top{top:0;left:0;width:100%;cursor:ns-resize}.marvin-widget .widget-resize .corner{position:absolute;width:12px;height:12px;pointer-events:all;z-index:10}.marvin-widget .widget-resize .corner.debug{background-color:#000}.marvin-widget .widget-resize .corner.lt{left:0;top:0;cursor:nwse-resize}.marvin-widget .widget-resize .corner.rt{right:0;top:0;cursor:nesw-resize}.marvin-widget .widget-resize .corner.lb{left:0;bottom:0;cursor:nesw-resize}.marvin-widget .widget-resize .corner.rb{right:0;bottom:0;cursor:nwse-resize}.marvin-widget .widget-resize.editing::before{opacity:1}.marvin-widget .widget-resize.active::before{border-color:#ff0}.marvin-widget .widget-resize::before{content:" ";transition:opacity .2s;opacity:0;position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border:2px solid #fff;border-radius:0px}',""]);const a=s},62:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var r={},s=[],a=0;a<e.length;a++){var d=e[a],c=i.base?d[0]+i.base:d[0],u=r[c]||0,l="".concat(c," ").concat(u);r[c]=u+1;var f=n(l),p={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var g=o(p,i);i.byIndex=a,t.splice(a,0,{identifier:l,updater:g,references:1})}s.push(l)}return s}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var r=i(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<r.length;s++){var a=n(r[s]);t[a].references--}for(var d=i(e,o),c=0;c<r.length;c++){var u=n(r[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}r=d}}},793:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},173:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},892:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},36:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,o&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},464:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={id:i,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0;var i={};(()=>{n.r(i),n.d(i,{default:()=>k});const e=require("react");var t=n.n(e),o=n(62),r=n.n(o),s=n(36),a=n.n(s),d=n(793),c=n.n(d),u=n(892),l=n.n(u),f=n(173),p=n.n(f),g=n(464),h=n.n(g),v=n(472),m={};m.styleTagTransform=h(),m.setAttributes=l(),m.insert=c().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=p(),r()(v.Z,m),v.Z&&v.Z.locals&&v.Z.locals;var b=n(967);const w=(e,t,n,i,o)=>{let{x:r,y:s}=(d=t,{x:(a=e).x+d.x,y:a.y+d.y});var a,d;let{width:c,height:u}=n;return o.includes("L")&&(c-=i.x,r+=c>=0?i.x:n.width),o.includes("R")&&(c+=i.x,c<0&&(r+=c)),o.includes("T")&&(u-=i.y,s+=u>=0?i.y:n.height),o.includes("B")&&(u+=i.y,u<0&&(s+=u)),`translateX(${r}px) translateY(${s}px)`},y=(e,t,n)=>n.includes("L")?Math.abs(e.width-t.x):n.includes("R")?Math.abs(e.width+t.x):e.width,x=(e,t,n)=>n.includes("T")?Math.abs(e.height-t.y):n.includes("B")?Math.abs(e.height+t.y):e.height,E=(e,t,n,i)=>{let o=t.x,r=t.y,s=e.width,a=e.height;return i.includes("L")&&(s-=n.x,o+=s>0?n.x:e.width),i.includes("R")&&(s+=n.x,s<0&&(o+=s)),i.includes("T")&&(a-=n.y,r+=a>0?n.y:e.height),i.includes("B")&&(a+=n.y,a<0&&(r+=a)),{x:o,y:r,width:Math.abs(s),height:Math.abs(a)}},S=(e,t)=>Math.round(t/e)*e,z=e=>{const{debug:t=!1,editing:[n,i],position:[o,r],size:[s,a],resizeType:[d,c],sizeOffset:[,u],runtimeSize:[l,f],runtimePosition:[p,g],onSelected:h,onResized:v,useRuntime:m=!1,grid:w,checking:y}=e,x={...o},z={...s},M=(0,b.createMovable)({debug:t,onStart(){c(d),"function"==typeof h&&h()},onMoving({offset:e}){if(u(e),m){const{x:t,y:n,width:i,height:o}=E(z,x,e,d);f({width:i,height:o}),g({x:t,y:n})}},onEnd:({offset:e})=>{u({x:0,y:0});const{x:t,y:n,width:o,height:s}=E(z,x,e,d),c={x:S(w,t),y:S(w,n)},l={width:S(w,o),height:S(w,s)};i(!1),"function"!=typeof y||y({...c,...l})?(r({...c}),g({...c}),a({...l}),f({...l}),"function"==typeof v&&v({...l})):(f({...z}),g({...x}))}}),k={updatePosition(e){Object.assign(x,e)},updateSize(e){Object.assign(z,e)},update(e,t){Object.assign(x,e),Object.assign(z,t)},init(e){M.init(e)},dispose(){M.dispose()}};return k},M=(t,n,i=null)=>{if(Array.isArray(t))return t.map(((e,t)=>M(e,n,t)));if((0,e.isValidElement)(t)){const{props:o,type:r}=t,{...s}=o;return(0,e.createElement)(r,{...s,...n,key:i})}return t},k=n=>{const{title:i="Untitled",children:o,position:r={x:0,y:0},size:s={width:240,height:240},data:a=null,debug:d=!1,active:c=!1,useRuntime:u=!1,grid:l=1,locked:f=!1,onClose:p,onMoveStart:g,onMoveEnd:h,onMoving:v,onMinify:m,onSelected:E,onResizing:k,onResized:N,onChange:L,checking:T}=n,[P,C]=(0,e.useState)(!1),[O,R]=(0,e.useState)({x:0,y:0}),[j,_]=(0,e.useState)(!1),[A,B]=(0,e.useState)(0),[I,Z]=(0,e.useState)(null),[U,X]=(0,e.useState)(null),Y={x:S(l,r.x),y:S(l,r.y)},[q,D]=(0,e.useState)(Y),[F,H]=(0,e.useState)({x:S(l,r.x),y:S(l,r.y)}),$={width:S(l,s.width),height:S(l,s.height)},[J,V]=(0,e.useState)($),[G,K]=(0,e.useState)({width:S(l,s.width),height:S(l,s.height)}),[Q,W]=(0,e.useState)({x:0,y:0}),[ee,te]=(0,e.useState)(""),[ne]=(0,e.useState)((0,b.createMovable)({debug:d,grid:l,snap:J,onStart(){te(""),C(!0),se()},onMoving({offset:e}){R(e)},onEnd({position:e}){C(!1),re(!1),R({x:0,y:0}),("function"!=typeof T||T({...e,...ne.getSnap()}))&&D(e)}}));(0,e.useEffect)((()=>{if(I){const{height:e}=I.getBoundingClientRect();return B(e>>0),ne.init(I),()=>{ne.dispose()}}}),[I]),(0,e.useEffect)((()=>{P&&"function"==typeof v&&v({position:{x:q.x+O.x,y:q.y+O.y},data:a})}),[q,O,P,a]),(0,e.useEffect)((()=>{const e={position:{...q},data:a},t=P?g:h;"function"==typeof t&&t(e)}),[q,P,a]),(0,e.useEffect)((()=>{"function"==typeof m&&m(j)}),[j]),(0,e.useEffect)((()=>{if(!U)return;const e=e=>{e.stopPropagation(),se()},t=e=>{e.stopPropagation(),re(!1)};return U.addEventListener("mousedown",e),U.addEventListener("mouseup",t),()=>{U.removeEventListener("mousedown",e),U.removeEventListener("mouseup",t)}}),[U]);const ie=(0,e.useCallback)((e=>{e.stopPropagation(),"function"==typeof p&&p({position:{...q},data:a})}),[a,q]),[oe,re]=(0,e.useState)(!1),se=()=>{re(!0),"function"==typeof E&&E()},ae=e=>({debug:d,grid:l,checking:T,editing:[oe,re],size:[J,V],position:[q,D],sizeOffset:[Q,W],resizeType:[e,te],runtimeSize:[G,K],runtimePosition:[F,H],onSelected:se,useRuntime:u,onResized:N}),de=(e,t)=>()=>{if(e)return t.init(e),()=>{t.dispose()}},[ce,ue]=(0,e.useState)(null),[le]=(0,e.useState)(z(ae("L")));(0,e.useEffect)(de(ce,le),[ce]);const[fe,pe]=(0,e.useState)(null),[ge]=(0,e.useState)(z(ae("R")));(0,e.useEffect)(de(fe,ge),[fe]);const[he,ve]=(0,e.useState)(null),[me]=(0,e.useState)(z(ae("T")));(0,e.useEffect)(de(he,me),[he]);const[be,we]=(0,e.useState)(null),[ye]=(0,e.useState)(z(ae("B")));(0,e.useEffect)(de(be,ye),[be]);const[xe,Ee]=(0,e.useState)(null),[Se]=(0,e.useState)(z(ae("LT")));(0,e.useEffect)(de(xe,Se),[xe]);const[ze,Me]=(0,e.useState)(null),[ke]=(0,e.useState)(z(ae("RT")));(0,e.useEffect)(de(ze,ke),[ze]);const[Ne,Le]=(0,e.useState)(null),[Te]=(0,e.useState)(z(ae("LB")));(0,e.useEffect)(de(Ne,Te),[Ne]);const[Pe,Ce]=(0,e.useState)(null),[Oe]=(0,e.useState)(z(ae("RB")));(0,e.useEffect)(de(Pe,Oe),[Pe]),(0,e.useEffect)((()=>{[le,ge,me,ye,Se,ke,Te,Oe].forEach((e=>e.updatePosition(q))),ne.update(q)}),[q]),(0,e.useEffect)((()=>{[le,ge,me,ye,Se,ke,Te,Oe].forEach((e=>e.updateSize(J))),ne.snap(J)}),[J]),(0,e.useEffect)((()=>{var e,t;(e=Y).x===(t=q).x&&e.y===t.y&&((e,t)=>e.width===t.width&&e.height===t.height)($,J)||"function"==typeof L&&L({...q,...J})}),[q,J]),(0,e.useEffect)((()=>{"function"==typeof k&&k({...G})}),[G,A]);const[Re,je]=(0,e.useState)(null);(0,e.useEffect)((()=>{const e=M(o,{size:{...G}});je(e)}),[o,G,A]);const[_e,Ae]=(0,e.useState)(!1);return t().createElement("div",{className:c&&!f?"marvin-widget":"marvin-widget background",style:{transform:w(q,O,J,Q,ee),width:y(J,Q,ee),height:j?A:x(J,Q,ee),transition:oe||f?"":"all 0.2s"},onMouseDown:e=>{se()},onMouseUp:()=>{re(!1)},onMouseEnter:()=>{Ae(!0)},onMouseLeave:()=>{Ae(!1)}},f?null:t().createElement("div",{className:"widget-head",ref:Z,style:{opacity:_e||oe?1:0}},t().createElement("div",{className:"title"},i),t().createElement("div",{className:"tools",ref:X},t().createElement("div",{className:"btn maxium",onClick:()=>{}}),t().createElement("div",{className:"btn minify",onClick:()=>{_(!j)}}),t().createElement("div",{className:"btn close",onClick:ie}))),t().createElement("div",{className:"widget-body"},Re),j||f?null:t().createElement("div",{className:(f?"widget-resize":"widget-resize editing")+(c?" active":"")},t().createElement("div",{className:d?"bar debug left":"bar left",ref:ue}),t().createElement("div",{className:d?"bar debug right":"bar right",ref:pe}),t().createElement("div",{className:d?"bar debug top":"bar top",ref:ve}),t().createElement("div",{className:d?"bar debug bottom":"bar bottom",ref:we}),t().createElement("div",{className:d?"corner debug lt":"corner lt",ref:Ee}),t().createElement("div",{className:d?"corner debug rt":"corner rt",ref:Me}),t().createElement("div",{className:d?"corner debug lb":"corner lb",ref:Le}),t().createElement("div",{className:d?"corner debug rb":"corner rb",ref:Ce})))}})(),module.exports=i})();